<%= main_frame do %>
  <div class="space-y-4 max-w-xl">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">New Flag</h2>
      <%= link_to "Back", owner_flags_path, class: "text-sm text-blue-600 hover:underline" %>
    </div>

    <%= render 'owner/shared/validation_banner', errors: @validation_errors, success_message: @validation_success_message if defined?(@validation_errors) || defined?(@validation_success_message) %>

    <%= form_with model: @flag, url: owner_flags_path, data: { controller: 'validate-form confirm', action: 'submit->confirm#intercept' } do |f| %>
      <div class="space-y-3">
        <div>
          <%= f.label :slug, class: 'block text-sm font-medium' %>
          <%= f.text_field :slug, class: 'mt-1 w-full border rounded px-2 py-1' %>
          <p class="text-xs text-gray-500">Use a URL-safe slug (e.g., 'early-access').</p>
        </div>
        <div>
          <%= f.label :name, class: 'block text-sm font-medium' %>
          <%= f.text_field :name, class: 'mt-1 w-full border rounded px-2 py-1' %>
        </div>
        <div>
          <%= f.label :description, class: 'block text-sm font-medium' %>
          <%= f.text_area :description, rows: 4, class: 'mt-1 w-full border rounded px-2 py-1' %>
        </div>
        <div class="flex items-center gap-2">
          <%= button_tag 'Validate All', type: 'submit', formmethod: 'post', formaction: owner_validate_flags_path, class: 'px-3 py-2 rounded border' %>
          <%= f.submit 'Create', class: 'px-3 py-2 rounded bg-gray-800 text-white' %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>
